\documentclass[a4paper, 10pt, ]{article}

\input{../misc_LaTeX/preamble.tex}

\def\oznacenieCasti{ref1 -2022}





\begin{document}

\lstset{%
style=mystyle,
rangebeginprefix=\#\#\#\ cellB\ ,%
rangebeginsuffix=\ \#\#\#,%
rangeendprefix=\#\#\#\ cellE\ ,%
rangeendsuffix=\ \#\#\#,%
includerangemarker=false,
}





\fontsize{12pt}{22pt}\selectfont

\centerline{\textsf{Nikola Popara} \hfill \textsf{\oznacenieCasti}}

\fontsize{18pt}{22pt}\selectfont





\begin{flushleft}
	\textbf{\textsf{Riadenie modelu lode}}
\end{flushleft}





\normalsize

\bigskip

{\hypersetup{hidelinks}

\tableofcontents

}

\bigskip

\vspace{18pt}






\begin{figure}[b]
	\centering
	
	\includegraphics{Obr_AdaptRiadSRefModSch_standalone.pdf}
	
	\caption{Adaptívne riadenie s referenčným modelom -- principiálna schéma}
	\label{Adaptívne riadenie s referenčným modelom}
	
\end{figure}


\section{Uvod}



Refera sa zaobera adaptivnym riadenim zjednoduseneho modela lode. Zvolenym adaptacnym algoritmom na riadenie modelu lode bol MRAC resp. adaptivne riadenie s referencnym modelom.

Pri adaptívnom riadení s referenčným modelom obsahuje riadiaci systém dve spätnoväzbové slučky. Prva spatnovazbova slucka obsahuje riadeny system a regulator. Druha spatnovazbova slucka obsahuje adaptacny mechanizmus, ktory upravuje parametre regulatora. Vstupom do Mechanizmu adaptacie je rozdiel medzi výstupom riadeného systému a~referenčného modelu. Mechanizmus, ktorý adaptuje parametre regulátora môže byť v adaptívnom riadení s~referenčným modelom získaný použitím gradientnej metódy. Žiadané vlastnosti uzavretého regulačného obvodu sú opísané referenčným modelom.




\section{Simulacny model}

V tomto referate sa pouzil zjednoduseny model lode tzv. Nomotov model, ktorý má tvar prenosovej funkcie:
\begin{equation} \label{NomotoTF}
\varphi(s) = \frac{\frac{K}{\tau_1}}{s^2 + \frac{1}{\tau_1}s} \, \delta(s)
\end{equation}
kde $\varphi(s)$ je uhol natočenia lode v radiánoch, $\delta$ je uhol vychýlenia kormidla v radiánoch. Uvažujme nákladnú loď danú parametrami v Tabuľke~\ref{Parametre lode}.

\vspace{5mm}

\begin{center}
	\catcode`\-=12
	\tabcaption{Parametre lode}
	\label{Parametre lode}
	\begin{tabular}{ c l }
		\toprule
		Parameter & Hodnota \\
		\midrule
		$L$         & $161$ m \\
		$K_0$       &  $-3,86$ \\
		$\tau_{10}$ & $5,66$ \\
		$v$         &  $5$ m s$^{-1}$ \\
		\bottomrule
	\end{tabular}
\end{center}

kde $L$ je dĺžka lode v metroch, $K_0$, $\tau_{10}$ sú konštanty, $v$ je rýchlosť lode v smere danom uhlom $\varphi(s)$ v~metroch za sekundu. Parametre, ktore boli uvedene vysie v prenosovej funkcii \eqref{NomotoTF} sú definované nasledovne:

\begin{align}
K &= K_0 \frac{v}{L} \\
\tau_1 &= \tau_{10} \frac{L}{v}
\end{align}



\section{Referencny model}

Referencny model vyjadruje to ako chceme aby sa spraval riadeny system. Vstupom je referenčná $r$ veličina a vystum $y_m$ definuje pozadovane spravanie systemu. Požiadavky na dynamiku kormidlovania nákladnej lode nech sú definované referenčným modelom v~tvare prenosovej funkcie:
\begin{equation}
\frac{y_m(s)}{r(s)} = \frac{0,0025 }{s^2 + 0,1 s + 0,0025}
\end{equation}



\section{Adaptivne riadenie: MRAC gradientný}



Ide o sústavu druhého rádu s astatizmom. Preto je vhodné použiť pre jej riadenie PD (proporcionálno-derivačný) zákon riadenia v tvare
\begin{equation} \label{PDzakRiadSobl}
u(s) = \Theta_1 \left(r(s)-y(s)\right) - \Theta_2 s y(s)
\end{equation}
kde $r$ je žiadaná hodnota.
Zákon riadenia \eqref{PDzakRiadSobl} vznikne úpravou štandardného PD regulátora v tvare
\begin{equation} \label{standardPDregSobl}
u(s) = \left(\Theta_1 + \Theta_2 s\right) e_r(s)
\end{equation}
kde $e_r = r-y$ je regulačná odchýlka, pričom sa predpokladá, že $r(t) = \text{konšt.}$ a teda $\dot{r}(t) = 0$. V časovej oblasti možno napísať štandardný PD regulátor \eqref{standardPDregSobl} v~tvare
\begin{equation}
u(t) = \Theta_1 \left( r(t) - y(t) \right) + \Theta_2 \left( \dot{r}(t) - \dot{y}(t) \right)
\end{equation}
a upravený PD zákon riadenia \eqref{PDzakRiadSobl} má v časovej oblasti tvar
\begin{equation}
u(t) = \Theta_1 \left( r(t) - y(t) \right) - \Theta_2  \dot{y}(t)
\end{equation}




Dosadením \eqref{PDzakRiadSobl} do \eqref{sustavaSoblast} získame prenosovú funkciu uzavretého regulačného obvodu (URO) v tvare
\begin{equation} \label{uvGradUROSoblast}
\frac{y(s)}{r(s)} = \frac{b_0 \Theta_1}{s^2 + \left(a_1 + b_0 \Theta_2 \right) s + b_0 \Theta_1}
\end{equation}

Referenčný model nech je definovaný takto
\begin{equation} \label{uvGradRMSoblast}
\frac{y_m(s)}{r(s)}  =  \frac{b_{0m} }{s^2 + a_{1m} s + a_{0m}}
\end{equation}
kde $b_{0m}=a_{0m}$ a $a_{1m}$ sú konštanty. Je zrejmé, že ideálne parametre regulátora sú
\begin{align}
\Theta_1^\star &= \frac{a_{0m}}{b_0} \\
\Theta_2^\star &= \frac{a_{1m} - a_1}{b_0}
\end{align}
Pri ideálnych parametroch je adaptačná odchýlka $e$~nulová
\begin{equation} \label{gradDefAdaptE}
e = y - y_m
\end{equation}

Definujme účelovú funkciu vektora parametrov  $\Theta = \begin{bmatrix} \Theta_1 & \Theta_2  \end{bmatrix}^{T}$ v tvare
\begin{equation}
J(\Theta) = \frac{1}{2}e^2(\Theta,t)
\end{equation}
Pri ideálnych parametroch $\Theta^\star$ je adaptačná odchýlka $e$ nulová a účelová funkcia $J(\Theta)$ nadobúda munimum. Preto navrhnime zákon adaptácie parametrov $\Theta$ tak aby sme sa pri ich zmene (adaptácii) pohybovali proti smeru gradientu (vzhľadom na parametre $\Theta$) kvadratickej účelovej funkcie a teda zmenšovali hodnotu účelovej funkcie pretože sa tak približujeme k jej extrému -- minimu. Potom aj adaptačná odchýlka $e$ sa bude zmenšovať a výstupná veličina $y$ bude sledovať priebeh veličiny $y_m$, čo je cieľom riadenia. Zákon adaptácie nech má tvar
\begin{equation}
\dot\Theta
=
- \alpha
\frac{\partial J}{\partial \Theta}
\end{equation}
kde $\frac{\partial J}{\partial\Theta}$ je gradient $J$ vzhľadom na parametre $\Theta$ a určuje kladný smer, preto je použité znamienko mínus, čím dostávame smer \uv{proti gradientu} a $\alpha$ je ľubovolná kladná konštanta, ktorá umožňuje nastaviť \uv{krok} pohybu, presnejšie rýchlosť pohybu proti smeru gradientu. Parameter $\alpha$ sa v adaptívnom riadení nazýva \emph{rýchlosť adaptácie} alebo aj \emph{adaptačné zosilnenie}.




Vyjadrime $\frac{\partial J}{\partial\Theta}$ v tvare
\begin{equation}
\frac{\partial J}{\partial \Theta}
= \frac{\partial}{\partial \Theta} \left( \frac{1}{2}e^2(\Theta,t) \right)
= \frac{1}{2} 2 e(\Theta,t) \frac{\partial e(\Theta,t)}{\partial \Theta}
= e \frac{\partial e}{\partial \Theta}
\end{equation}
potom zákon adaptácie je v tvare
\begin{equation}
\dot\Theta = - \alpha e \frac{\partial e}{\partial \Theta}
\end{equation}

Rovnicu \eqref{gradDefAdaptE} možno písať v tvare Parciálna derivácia rovnice \eqref{gradAdaptE} podľa prvého parametra $\Theta_1$ je a parciálna derivácia rovnice \eqref{gradAdaptE} podľa druhého parametra $\Theta_2$ je


Citlivostné funkcie \eqref{citl1Neaprox} a \eqref{citl2Neaprox} obsahujú neznáme parametre sústavy a tiež nateraz neznáme parametre regulátora a preto ich nie je možné použiť. Všimnime si, že ak by mali parametre regulátora práve ideálnu hodnotu, teda ${\Theta}_1 = {\Theta}_1^\star$ a ${\Theta}_2 = {\Theta}_2^\star$ potom platí
\begin{equation}
s^2 + \left( a_1 + b_0 \Theta_2 \right) s + b_0 \Theta_1 = s^2 + a_{1m} s + a_{0m}
\end{equation}
A ďalej, ak poznáme znamienko konštanty $b_0$ môže byť toto zosilnenie absorbované do adaptačného zosilnenia $\alpha$. Hodnota $\alpha$ je ľubovolná, preto nie je potrebné poznať presnú hodnotu $b_0$, len jeho znamienko, aby bolo možné správne zvoliť znamienko konštanty $\alpha$ a zabezpečiť záporné výsledné znamienko v zákone adaptácie.  Uvážením uvedeného môžeme citlivostné funkcie aproximovať nasledovne
\begin{equation} \label{citl1Aprox}
\frac{\partial e}{\partial \Theta_1} = \frac{1}{ \left( s^2 + a_{1m} s + a_{0m} \right) } \left( r - y \right)
\end{equation}
\begin{equation} \label{citl2Aprox}
\frac{\partial e}{\partial \Theta_2} = \frac{-s} { \left( s^2 + a_{1m} s + a_{0m} \right) } \,	y
\end{equation}

Zákony adaptácie pre jednotlivé parametre sú potom v~tvare
\begin{align}
\Theta_1 s &= - \alpha_1 \left( \frac{1}{ \left( s^2 + a_{1m} s + a_{0m} \right) } \left( r - y \right) \right) \, e \\
\Theta_2 s &= - \alpha_2 \left( \frac{-s}{ \left( s^2 + a_{1m} s + a_{0m} \right)} \, y \right) \, e
\end{align}
kde sme zaviedli samostatné adaptačné zosilnenia $\alpha_1$ a $\alpha_2$ pre oba zákony adaptácie, čo umožní ich lepšie naladenie.









\subsection{Vstupny signal}

Uvažujme vstupny sygnal skokovej zmeny. Jedna perioda trvajuca 1000 $s$. Roysah hodnot vsutpneho signalu je -5 az 5. Dlzka celej simulacie je 3000 $s$

\begin{figure}[h]
	\centering
	
	\makebox[\textwidth][c]{%
		\includegraphics[width=17cm]{vstup.png}
	}
	
	\caption{Vstupny signal do modelu}
	
\end{figure}











\subsection{Riadenie}
Uvažujme riadený systém daný prenosovou funkciou v~tvare
\begin{equation} \label{sustavaSoblast}
\frac{y(s)}{u(s)} = \frac{b_0}{s^2 + a_1 s}
\end{equation}
kde $y(s)$ je obraz výstupného signálu, $u(s)$ je obraz vstupného signálu a $a_1$, $b_0$ sú reálne konštanty -- neznáme parametre sústavy.

Jedna sa o zjednodusenie nasho modelu lode:
\begin{equation}
\varphi(s) = \frac{\frac{K}{\tau_1}}{s^2 + \frac{1}{\tau_1}s} \, \delta(s)
\end{equation}
l
\subsubsection{Zakon riadenia}

Na riadenie systemu sa pouziva zakon riadenia, ktory je v tvare
\begin{equation} \label{PDzakRiadSobl}
u(s) = \Theta_1 \left(r(s)-y(s)\right) - \Theta_2 s y(s)
\end{equation}
kde $r$ je žiadaná hodnota.
Zákon riadenia \eqref{PDzakRiadSobl} vznikne úpravou štandardného PD regulátora v tvare
\begin{equation} \label{standardPDregSobl}
u(s) = \left(\Theta_1 + \Theta_2 s\right) e_r(s)
\end{equation}
kde $e_r = r-y$ je regulačná odchýlka, pričom sa predpokladá, že $r(t) = \text{konšt.}$ a teda $\dot{r}(t) = 0$. V časovej oblasti možno napísať štandardný PD regulátor \eqref{standardPDregSobl} v~tvare
\begin{equation}
u(t) = \Theta_1 \left( r(t) - y(t) \right) + \Theta_2 \left( \dot{r}(t) - \dot{y}(t) \right)
\end{equation}
a upravený PD zákon riadenia \eqref{PDzakRiadSobl} má v časovej oblasti tvar
\begin{equation}
u(t) = \Theta_1 \left( r(t) - y(t) \right) - \Theta_2  \dot{y}(t)
\end{equation}


\subsubsection{Analiticke URO}
\label{ss1rnumsim}

\subsubsection{Podmienka zhody}
\label{ss1rnumsim}

\subsection{Vysledok simulacie riadenia}





\begin{figure}[h]
	\centering
	
	\makebox[\textwidth][c]{%
		\includegraphics[width=17cm]{signal.png}
	}
	
	\makebox[\textwidth][c]{%
		\includegraphics[width=17cm]{theta.png}
	}
	
	\makebox[\textwidth][c]{%
		\includegraphics[width=17cm]{zasah.png}
	}
	
	\caption{Simulácia pri $v = 2$ [m/s], viď text v časti}
	
\end{figure}



\section{Testovanie rychlosti}

Testovaly sa adaptivne riadenie pre dve rozne rychlosti resp tri. Pouzite rychlosti boli $v = 5$ [m/s], $v = 4$ [m/s], $v = 6$ [m/s]. Z obr. 4 je vidiet, ze sa rychlost ma vpliv na regulaciu systemu avsak minimalnu.
Testovaly sa adaptivne riadenie pre dve rozne rychlosti resp tri. Pouzite rychlosti boli $v = 5$ [m/s], $v = 4$ [m/s], $v = 6$ [m/s]. Z obr. 4 je vidiet, ze sa rychlost ma vpliv na regulaciu systemu avsak minimalnu.

\begin{figure}[!t]
	\centering
	
	\makebox[\textwidth][c]{%
		\includegraphics[width=17cm, height=5cm]{signal3.png}
	}
	
	\caption{Simulácia pri $v = 5$ [m/s] $v = 4$ [m/s] $v = 6$ [m/s], viď text v časti}
	
\end{figure}
 
\section{Meniaca sa rychlost}










\end{document}
